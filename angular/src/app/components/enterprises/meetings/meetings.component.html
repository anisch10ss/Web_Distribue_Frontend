<div class="meetings-page">
  <div class="center-content">
    <!-- Search bar -->
    <div class="d-flex">
      <h2 class="page-title">Meetings</h2>
    </div>

    <mat-form-field class="search-field">
      <input
        matInput
        placeholder="Search"
        [(ngModel)]="searchDataValue"
        (ngModelChange)="searchData($event)"
      />
    </mat-form-field>
    <button
      class="btn btn-three-primary mx-auto"
      style="height: 40px; color: white; margin-bottom: 50px"
      (click)="showAddForm = true; mode = 'Add'"
    >
      Add meeting
    </button>
    <div *ngIf="showAddForm">
      <div class="row">
        <!-- Profile Details -->
        <div class="settings-widget">
          <div
            class="settings-inner-blk add-course-info mat-style new-ticket-blk p-0"
          >
            <div class="comman-space">
              <h4>{{mode}} event</h4>
              <div>
                <div class="form-group">
                  <label class="form-control-label">Location</label>
                  <input
                    type="text"
                    class="form-control"
                    [value]="addFormLocation"
                    (input)="addFormLocation = $event.target.value"
                  />
                </div>
                <div class="form-group">
                  <label class="form-control-label">Agenda</label>
                  <input
                    type="text"
                    class="form-control"
                    [value]="addFormAgenda"
                    (input)="addFormAgenda = $event.target.value"
                  />
                </div>
                <div class="form-group">
                  <label class="form-control-label">Date</label>
                  <input
                    type="datetime-local"
                    class="form-control"
                    [ngModel]="addFormDate | date : 'yyyy-MM-ddTHH:mm'"
                  />
                </div>
              </div>
              <div class="submit-ticket">
                <button
                  (click)="onAddMeeting($event)"
                  type="button"
                  class="btn btn-primary"
                >
                  Submit
                </button>
                <button
                  (click)="cancelAdd($event)"
                  type="button"
                  class="btn btn-secondary"
                >
                  Cancel
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Table to display meetings -->
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
      <ng-container
        *ngFor="let column of displayedColumns; index as i"
        [matColumnDef]="column"
      >
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="table-header"
        >
          {{ column }}
        </th>

        <ng-container
          *ngIf="i != displayedColumns.length - 1; else actionColumns"
          ><td mat-cell *matCellDef="let meeting">
            {{ meeting[column] }}
          </td></ng-container
        >
        <ng-template #actionColumns>
          <td mat-cell *matCellDef="let meeting; let j = index">
            <button (click)="updateMeeting(j)" class="btn btn-three-secondary sub-btn mx-3">
              <i class="fas fa-pen-to-square"></i>
            </button>
            <button (click)="deleteMeeting(j)" class="btn btn-three-secondary sub-btn">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </ng-template>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
